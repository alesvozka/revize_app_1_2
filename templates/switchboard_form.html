{% extends "base.html" %}

{% block title %}{% if switchboard %}Editace rozváděče{% else %}Nový rozváděč{% endif %} - Revize App{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Page Header -->
    <div class="mb-6">
        <div class="flex items-center justify-between">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">
                    {% if switchboard %}Editace rozváděče{% else %}Nový rozváděč{% endif %}
                </h2>
                <p class="text-gray-600 mt-1">
                    Revize: {{ revision.revision_name or 'Revize #' ~ revision.revision_id }}
                </p>
            </div>
            <a href="/revision/{{ revision.revision_id }}" class="text-gray-600 hover:text-gray-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </a>
        </div>
    </div>

    <!-- Form -->
    <form method="POST" action="{% if switchboard %}/switchboard/{{ switchboard.switchboard_id }}/update{% else %}/revision/{{ revision.revision_id }}/switchboard/create{% endif %}" class="bg-white rounded-lg shadow p-6">
        
        <!-- Základní informace -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Základní informace</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Název rozváděče *</label>
                    <input type="text" name="switchboard_name" value="{% if switchboard %}{{ switchboard.switchboard_name or '' }}{% endif %}" 
                           required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Umístění</label>
                    <input type="text" name="switchboard_location" value="{% if switchboard %}{{ switchboard.switchboard_location or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Pořadí</label>
                    <input type="number" name="switchboard_order" value="{% if switchboard and switchboard.switchboard_order is not none %}{{ switchboard.switchboard_order }}{% endif %}" 
                           min="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Typ rozváděče</label>
                    <input type="text" name="switchboard_type" value="{% if switchboard %}{{ switchboard.switchboard_type or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Popis</label>
                    <textarea name="switchboard_description" rows="2" 
                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{% if switchboard %}{{ switchboard.switchboard_description or '' }}{% endif %}</textarea>
                </div>
            </div>
        </div>

        <!-- Technické údaje -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Technické údaje</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Sériové číslo</label>
                    <input type="text" name="switchboard_serial_number" value="{% if switchboard %}{{ switchboard.switchboard_serial_number or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Datum výroby</label>
                    <input type="date" name="switchboard_production_date" value="{% if switchboard and switchboard.switchboard_production_date %}{{ switchboard.switchboard_production_date.strftime('%Y-%m-%d') }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jmenovitý proud (A)</label>
                    <input type="number" step="0.01" name="switchboard_rated_current" value="{% if switchboard and switchboard.switchboard_rated_current is not none %}{{ switchboard.switchboard_rated_current }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jmenovité napětí (V)</label>
                    <input type="number" step="0.01" name="switchboard_rated_voltage" value="{% if switchboard and switchboard.switchboard_rated_voltage is not none %}{{ switchboard.switchboard_rated_voltage }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Krytí IP</label>
                    <input type="text" name="switchboard_ip_rating" value="{% if switchboard %}{{ switchboard.switchboard_ip_rating or '' }}{% endif %}" 
                           placeholder="např. IP44" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ochrana proti nárazu</label>
                    <input type="text" name="switchboard_impact_protection" value="{% if switchboard %}{{ switchboard.switchboard_impact_protection or '' }}{% endif %}" 
                           placeholder="např. IK08" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Třída ochrany</label>
                    <input type="text" name="switchboard_protection_class" value="{% if switchboard %}{{ switchboard.switchboard_protection_class or '' }}{% endif %}" 
                           placeholder="např. I, II" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
        </div>

        <!-- Výrobce -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Výrobce</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Výrobce rozváděče</label>
                    <input type="text" name="switchboard_manufacturer" value="{% if switchboard %}{{ switchboard.switchboard_manufacturer or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Adresa výrobce</label>
                    <input type="text" name="switchboard_manufacturer_address" value="{% if switchboard %}{{ switchboard.switchboard_manufacturer_address or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Normy</label>
                    <textarea name="switchboard_standards" rows="2" 
                              placeholder="např. ČSN EN 61439-1, ČSN EN 61439-2"
                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{% if switchboard %}{{ switchboard.switchboard_standards or '' }}{% endif %}</textarea>
                </div>
            </div>
        </div>

        <!-- Skříň rozváděče -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Skříň rozváděče</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Typ skříně</label>
                    <input type="text" name="switchboard_enclosure_type" value="{% if switchboard %}{{ switchboard.switchboard_enclosure_type or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Výrobce skříně</label>
                    <input type="text" name="switchboard_enclosure_manufacturer" value="{% if switchboard %}{{ switchboard.switchboard_enclosure_manufacturer or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Způsob instalace skříně</label>
                    <input type="text" name="switchboard_enclosure_installation_method" value="{% if switchboard %}{{ switchboard.switchboard_enclosure_installation_method or '' }}{% endif %}" 
                           placeholder="např. nástěnná, vestavěná"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
        </div>

        <!-- Nadřazený rozváděč -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Nadřazený rozváděč</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nadřazený rozváděč</label>
                    <input type="text" name="switchboard_superior_switchboard" value="{% if switchboard %}{{ switchboard.switchboard_superior_switchboard or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jistič - jmenovitý proud (A)</label>
                    <input type="number" step="0.01" name="switchboard_superior_circuit_breaker_rated_current" value="{% if switchboard and switchboard.switchboard_superior_circuit_breaker_rated_current is not none %}{{ switchboard.switchboard_superior_circuit_breaker_rated_current }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jistič - charakteristika</label>
                    <input type="text" name="switchboard_superior_circuit_breaker_trip_characteristic" value="{% if switchboard %}{{ switchboard.switchboard_superior_circuit_breaker_trip_characteristic or '' }}{% endif %}" 
                           placeholder="např. B, C, D" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jistič - výrobce</label>
                    <input type="text" name="switchboard_superior_circuit_breaker_manufacturer" value="{% if switchboard %}{{ switchboard.switchboard_superior_circuit_breaker_manufacturer or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Jistič - model</label>
                    <input type="text" name="switchboard_superior_circuit_breaker_model" value="{% if switchboard %}{{ switchboard.switchboard_superior_circuit_breaker_model or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
        </div>

        <!-- Hlavní vypínač a kabel -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Hlavní vypínač a kabel</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Hlavní vypínač</label>
                    <input type="text" name="switchboard_main_switch" value="{% if switchboard %}{{ switchboard.switchboard_main_switch or '' }}{% endif %}" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Kabel</label>
                    <input type="text" name="switchboard_cable" value="{% if switchboard %}{{ switchboard.switchboard_cable or '' }}{% endif %}" 
                           placeholder="např. CYKY 5x10" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Způsob instalace kabelu</label>
                    <input type="text" name="switchboard_cable_installation_method" value="{% if switchboard %}{{ switchboard.switchboard_cable_installation_method or '' }}{% endif %}" 
                           placeholder="např. v zemi, na zdi, v lištách"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
        </div>

        <!-- Poznámka -->
        <div class="mb-8">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 pb-2 border-b">Poznámka</h3>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Poznámka</label>
                <textarea name="switchboard_note" rows="3" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{% if switchboard %}{{ switchboard.switchboard_note or '' }}{% endif %}</textarea>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="flex items-center justify-between pt-6 border-t">
            <a href="/revision/{{ revision.revision_id }}" class="px-4 py-2 text-gray-700 hover:text-gray-900 transition">
                Zrušit
            </a>
            <button type="submit" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                {% if switchboard %}Uložit změny{% else %}Vytvořit rozváděč{% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}
